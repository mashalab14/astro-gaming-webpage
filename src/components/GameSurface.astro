---
// Game Surface component - restructured with 4 distinct components
import Gamesurface_Header from './Gamesurface_Header.astro';
import GameCanvas from './GameCanvas.astro';
import Gamesurface_Footer from './Gamesurface_Footer.astro';
import AdArea from './AdArea.astro';
import PauseOverlay from './PauseOverlay.astro';
---

<section class="viewport" id="game" aria-label="Game viewport" role="region">
  <!-- Main content area with game canvas and ad area -->
  <div class="main-content">
    <!-- Game area: Header, Canvas, Footer (70% width) -->
    <div class="game-area">
      <Gamesurface_Header />
      <GameCanvas />
      <Gamesurface_Footer />
    </div>
    
    <!-- AdArea (30% width, full viewport height) -->
    <AdArea />
  </div>
  
  <!-- Pause Overlay -->
  <PauseOverlay />
</section>

<style>
  /* ===== Game viewport - New 4-component layout ===== */
  .viewport { 
    position: relative; 
    border: none; 
    border-radius: 0; 
    height: 100vh; 
    width: 100%;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    background: var(--table-bg);
  }
  
  .viewport::before { 
    content: ""; 
    position: absolute; 
    inset: 0; 
    pointer-events: none; 
    background: radial-gradient(ellipse at center, rgba(0,0,0,0) 60%, rgba(0,0,0,0.18) 100%); 
    z-index: 2;
  }
  
  .viewport::after { 
    content: ""; 
    position: absolute; 
    inset: 0; 
    pointer-events: none; 
    background-image:
      radial-gradient(1px 1px at 0 0, rgba(255,255,255,.08) 1px, transparent 1px),
      radial-gradient(1px 1px at 1px 1px, rgba(0,0,0,.06) 1px, transparent 1px),
      radial-gradient(1px 1px at .5px .5px, rgba(255,255,255,.04) 1px, transparent 1px);
    background-size: 2px 2px; 
    opacity: .5;
    z-index: 2;
  }

  /* ===== Main content area (middle section) ===== */
  .main-content {
    display: flex;
    flex: 1;
    min-height: 0; /* Allow flex shrinking */
    position: relative;
  }

  /* Game area container (70% width) */
  .game-area {
    flex: 7;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
</style>
